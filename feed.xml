<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="http://jekyllrb.com" version="3.4.2">Jekyll</generator><link href="http://firsh.me/feed.xml" rel="self" type="application/atom+xml" /><link href="http://firsh.me/" rel="alternate" type="text/html" /><updated>2018-03-11T23:18:38+08:00</updated><id>http://firsh.me/</id><title type="html">观海听涛</title><subtitle>Flink，张建新技术博客，Kubernetes技术，虚拟化技术，微服务，容器技术,docker,Github, Google Kubernetes, kubernetes, Flink,Graphx,Spark,docker。</subtitle><author><name>breakeval13</name></author><entry><title type="html">是时候换一个环境了。</title><link href="http://firsh.me/2018/03/11/2018-over-or-start/" rel="alternate" type="text/html" title="是时候换一个环境了。" /><published>2018-03-11T23:05:06+08:00</published><updated>2018-03-11T23:05:06+08:00</updated><id>http://firsh.me/2018/03/11/2018-over-or-start</id><content type="html" xml:base="http://firsh.me/2018/03/11/2018-over-or-start/">&lt;h2 id=&quot;时隔17个月&quot;&gt;时隔17个月&lt;/h2&gt;

&lt;p&gt;本人Java大数据研发工程师一名，因为一些事情所以会离职，在这里和大家唠叨一下，16年10月进入公司，这么长的时间里面，对公司的技术感到欣慰，对公司的环境感到幸福，唯一不满意的就是公司的着重程度，我想很多公司都有这种情况，一个以技术为核心驱动的公司，能给公司带来利益的最底层是程序员，上一级是项目经理，然后就是销售部门，售前部门，商务部门，拿到一个项目不容易，做好一个项目同样不容易，所以因为种种原因，可能是觉得自己配不上这个公司吧，选择离职，是一个很好的决定。&lt;/p&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">时隔17个月</summary></entry><entry><title type="html">Flink 高可用集群搭建 HA</title><link href="http://firsh.me/2018/01/24/flinkinstall-on-redhat7/" rel="alternate" type="text/html" title="Flink 高可用集群搭建 HA" /><published>2018-01-24T16:16:32+08:00</published><updated>2018-01-24T16:16:32+08:00</updated><id>http://firsh.me/2018/01/24/flinkinstall-on-redhat7</id><content type="html" xml:base="http://firsh.me/2018/01/24/flinkinstall-on-redhat7/">&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;搭建一个高可用的Flink 集群HA
    用于项目测试
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;quick-start&quot;&gt;quick start&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;flink-conf.yaml&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
     &lt;span class=&quot;s&quot;&gt;jobmanager.rpc.port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;6123&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;jobmanager.heap.mb&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;512&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;taskmanager.heap.mb&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;512&lt;/span&gt;

     &lt;span class=&quot;s&quot;&gt;taskmanager.numberOfTaskSlots&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;2&lt;/span&gt;

     &lt;span class=&quot;s&quot;&gt;taskmanager.memory.preallocate&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;parallelism.default&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;1&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;jobmanager.web.address&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0.0.0.0&lt;/span&gt;

     &lt;span class=&quot;s&quot;&gt;jobmanager.web.port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8081&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;jobmanager.archive.fs.dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hdfs://ns/flink/completed_jobs/&lt;/span&gt;

     &lt;span class=&quot;s&quot;&gt;historyserver.web.address&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0.0.0.0&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;historyserver.web.port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8082&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;historyserver.archive.fs.dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hdfs://ns/flink/completed_jobs/&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;historyserver.archive.fs.refresh-interval&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;10000&lt;/span&gt;



     &lt;span class=&quot;s&quot;&gt;state.backend&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;filesystem&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;state.backend.fs.checkpointdir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hdfs://ns/flink/checkpoints_backend&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;state.backend.fs.savepointdir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hdfs://ns/flink/savepoints_backend&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;state.checkpoints.dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hdfs://ns/flink/checkpoints_data&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;state.savepoints.dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hdfs://ns/flink/savepoints_data&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;taskmanager.tmp.dirs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/home/aom/data/flink/tmp&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;env.log.dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/home/aom/data/logs/flink&lt;/span&gt;




     &lt;span class=&quot;s&quot;&gt;fs.hdfs.hadoopconf&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/home/aom/hadoop/etc/hadoop&lt;/span&gt;


     &lt;span class=&quot;s&quot;&gt;high-availability&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;zookeeper&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;high-availability.zookeeper.quorum&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;dscn1:2181,dscn2:2181,dscn3:2181&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;high-availability.zookeeper.storageDir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hdfs://ns/flink/recovery&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;high-availability.zookeeper.path.root&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/flink&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;masters
    &lt;pre&gt;&lt;code class=&quot;language-bahs&quot;&gt;tod1:8081
tod2:8081
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;slaves&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    tod1
    tod2
    tod3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;scp 到其他节点&lt;/li&gt;
  &lt;li&gt;启动集群
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    start-cluster.sh
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">搭建一个高可用的Flink 集群HA 用于项目测试</summary></entry><entry><title type="html">rocketmq 多Master集群搭建</title><link href="http://firsh.me/2018/01/24/rocketmq-master-all/" rel="alternate" type="text/html" title="rocketmq 多Master集群搭建" /><published>2018-01-24T15:01:53+08:00</published><updated>2018-01-24T15:01:53+08:00</updated><id>http://firsh.me/2018/01/24/rocketmq-master-all</id><content type="html" xml:base="http://firsh.me/2018/01/24/rocketmq-master-all/">&lt;p&gt;搭建一套多个Master的集群（RocketMQ）
    为了项目测试使用。&lt;/p&gt;

&lt;h2 id=&quot;quick-start&quot;&gt;quick start&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;准备RocketMQ 4.2.0 tar&lt;/li&gt;
  &lt;li&gt;准备JDK 1.8&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;config&quot;&gt;config&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;三个broker的配置 broker-a，broker-b，broker-c
broker-a.properties
broker-b.properties
broker-c.properties
修改下面配置文件的 &lt;code class=&quot;highlighter-rouge&quot;&gt;brokerName&lt;/code&gt;即可&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;#所属集群名字&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;brokerClusterName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rocketmq-aom
    &lt;span class=&quot;c&quot;&gt;#broker名字，注意此处不同的配置文件填写的不一样&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;brokerName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;broker-a|b|c
    &lt;span class=&quot;c&quot;&gt;#0 表示 Master，&amp;gt;0 表示 Slave&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;brokerId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0
    &lt;span class=&quot;c&quot;&gt;#nameServer地址，分号分割&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;namesrvAddr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;tod1:9876;tod2:9876;tod3:9876
    &lt;span class=&quot;c&quot;&gt;#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;defaultTopicQueueNums&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4
    &lt;span class=&quot;c&quot;&gt;#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;autoCreateTopicEnable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;autoCreateSubscriptionGroup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#Broker 对外服务的监听端口&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;listenPort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;10911
    &lt;span class=&quot;c&quot;&gt;#删除文件时间点，默认凌晨 4点&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;deleteWhen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;04
    &lt;span class=&quot;c&quot;&gt;#文件保留时间，默认 48 小时&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;fileReservedTime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;120
    &lt;span class=&quot;c&quot;&gt;#commitLog每个文件的大小默认1G&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;mapedFileSizeCommitLog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1073741824
    &lt;span class=&quot;c&quot;&gt;#ConsumeQueue每个文件默认存30W条，根据业务情况调整&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;mapedFileSizeConsumeQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;300000
    &lt;span class=&quot;c&quot;&gt;#destroyMapedFileIntervalForcibly=120000&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#redeleteHangedFileInterval=120000&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#检测物理文件磁盘空间&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;diskMaxUsedSpaceRatio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;88
    &lt;span class=&quot;c&quot;&gt;#存储路径&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;storePathRootDir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/aom/data/rocketmq/store
    &lt;span class=&quot;c&quot;&gt;#commitLog 存储路径&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;storePathCommitLog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/aom/data/rocketmq/store/commitlog
    &lt;span class=&quot;c&quot;&gt;#消费队列存储路径存储路径&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;storePathConsumeQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/aom/data/rocketmq/store/consumequeue
    &lt;span class=&quot;c&quot;&gt;#消息索引存储路径&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;storePathIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/aom/data/rocketmq/store/index
    &lt;span class=&quot;c&quot;&gt;#checkpoint 文件存储路径&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;storeCheckpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/aom/data/rocketmq/store/checkpoint
    &lt;span class=&quot;c&quot;&gt;#abort 文件存储路径&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;abortFile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/aom/data/rocketmq/store/abort
    &lt;span class=&quot;c&quot;&gt;#限制的消息大小&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;maxMessageSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;65536
    &lt;span class=&quot;c&quot;&gt;#flushCommitLogLeastPages=4&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#flushConsumeQueueLeastPages=2&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#flushCommitLogThoroughInterval=10000&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#flushConsumeQueueThoroughInterval=60000&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#Broker 的角色&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#- ASYNC_MASTER 异步复制Master&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#- SYNC_MASTER 同步双写Master&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#- SLAVE&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;brokerRole&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;ASYNC_MASTER
    &lt;span class=&quot;c&quot;&gt;#刷盘方式&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#- ASYNC_FLUSH 异步刷盘&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#- SYNC_FLUSH 同步刷盘&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;flushDiskType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;ASYNC_FLUSH
    &lt;span class=&quot;c&quot;&gt;#checkTransactionMessageEnable=false&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#发消息线程池数量&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#sendMessageThreadPoolNums=128&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#拉消息线程池数量&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#pullMessageThreadPoolNums=128&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;start&quot;&gt;start&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;修改脚本参数&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &lt;span class=&quot;c&quot;&gt;#runbroker.sh&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;JAVA_OPT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_OPT&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -server -Xms1g  -Xmx1g -Xmn512m -XX:PermSize=128m -XX:MaxPermSize=320m&quot;&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;#runserver.sh&lt;/span&gt;
   &lt;span class=&quot;nv&quot;&gt;JAVA_OPT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_OPT&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -server -Xms1g -Xmx1g -Xmn512m -XX:PermSize=128m -XX:MaxPermSize=320m
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;启动RocketMQ&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
   &lt;span class=&quot;c&quot;&gt;#先启动Nameserv（三台机器）&lt;/span&gt;
    nohup sh mqnamesrv &amp;amp;
    nohup sh mqnamesrv &amp;amp;
    nohup sh mqnamesrv &amp;amp;
   &lt;span class=&quot;c&quot;&gt;# 启动 broker（三台机器）&lt;/span&gt;
    nohup sh mqbroker -c /home/rocketmq/conf/2m-noslave/broker-a.properties &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp; 

    nohup sh mqbroker -c /home/rocketmq/conf/2m-noslave/broker-b.properties &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp; 

    nohup sh mqbroker -c /home/rocketmq/conf/2m-noslave/broker-c.properties &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp; 
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;test&quot;&gt;test&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;test RocketMQ&lt;/p&gt;

    &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    [root@tod1 bin]# ./mqadmin clusterList -n 192.168.1.149:9876
    Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=128m; support was removed in 8.0
    Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=128m; support was removed in 8.0
    #Cluster Name     #Broker Name            #BID  #Addr                  #Version                #InTPS(LOAD)       #OutTPS(LOAD) #PCWait(ms) #Hour #SPACE
    rocketmq-aom      broker-a                0     192.168.1.149:10911    V4_2_0_SNAPSHOT          0.00(0,0ms)         0.00(0,0ms)          0 421335.24 0.0128
    rocketmq-aom      broker-b                0     192.168.1.150:10911    V4_2_0_SNAPSHOT          0.00(0,0ms)         0.00(0,0ms)          0 421335.24 0.0116
    rocketmq-aom      broker-c                0     192.168.1.151:10911    V4_2_0_SNAPSHOT          0.00(0,0ms)         0.00(0,0ms)          0 421335.24 0.0116
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">搭建一套多个Master的集群（RocketMQ） 为了项目测试使用。</summary></entry><entry><title type="html">oracle for docker dev ENV</title><link href="http://firsh.me/2018/01/18/oracle-demo/" rel="alternate" type="text/html" title="oracle for docker dev ENV" /><published>2018-01-18T00:43:56+08:00</published><updated>2018-01-18T00:43:56+08:00</updated><id>http://firsh.me/2018/01/18/oracle-demo</id><content type="html" xml:base="http://firsh.me/2018/01/18/oracle-demo/">&lt;p&gt;oracle 服务采用 Docker 搭建，用的镜像为&lt;code class=&quot;highlighter-rouge&quot;&gt;wnameless/oracle-xe-11g&lt;/code&gt; 这里负责整理用来测试时候的问题。&lt;/p&gt;

&lt;h2 id=&quot;下载镜像pull&quot;&gt;下载镜像(pull)&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker pull wnameless/oracle-xe-11g
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d -p 49160:22 -p 49161:1521 -e &lt;span class=&quot;nv&quot;&gt;ORACLE_ALLOW_REMOTE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true &lt;/span&gt;wnameless/oracle-xe-11g
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;By default, the password verification is disable(password never expired). If you want it back, run this:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d -p 49160:22 -p 49161:1521 -e &lt;span class=&quot;nv&quot;&gt;ORACLE_PASSWORD_VERIFY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true &lt;/span&gt;wnameless/oracle-xe-11g
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;For performance concern, you may want to disable the disk asynch IO:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d -p 49160:22 -p 49161:1521 -e &lt;span class=&quot;nv&quot;&gt;ORACLE_DISABLE_ASYNCH_IO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true &lt;/span&gt;wnameless/oracle-xe-11g
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;For XDB user, run this:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d -p 49160:22 -p 49161:1521 -p 8080:8080 -e &lt;span class=&quot;nv&quot;&gt;ORACLE_ENABLE_XDB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true &lt;/span&gt;wnameless/oracle-xe-11g
Check &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;localhost:8080 work
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl -XGET &lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;You will show&lt;/p&gt;

&lt;p&gt;&amp;lt;!DOCTYPE HTML PUBLIC “-//IETF//DTD HTML 2.0//EN”&amp;gt;&lt;/p&gt;
&lt;html&gt;&lt;head&gt;
&lt;TITLE&gt;401 Unauthorized&lt;/TITLE&gt;
&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Unauthorized&lt;/h1&gt;
&lt;/body&gt;&lt;/html&gt;

&lt;h2 id=&quot;login-httplocalhost8080-with-following-credential&quot;&gt;Login http://localhost:8080 with following credential:&lt;/h2&gt;
&lt;p&gt;username: XDB
password: xdb
Connect database with following setting:&lt;/p&gt;

&lt;p&gt;hostname: localhost
port: 49161
sid: xe
username: system
password: oracle
Password for SYS &amp;amp; SYSTEM&lt;/p&gt;

&lt;p&gt;oracle
Login by SSH&lt;/p&gt;

&lt;p&gt;ssh root@localhost -p 49160
password: admin
Support custom DB Initialization&lt;/p&gt;

&lt;h2 id=&quot;dockerfile&quot;&gt;Dockerfile&lt;/h2&gt;
&lt;p&gt;FROM wnameless/oracle-xe-11g&lt;/p&gt;

&lt;p&gt;ADD init.sql /docker-entrypoint-initdb.d/&lt;/p&gt;

&lt;h2 id=&quot;sqldeveloper&quot;&gt;SQLDeveloper&lt;/h2&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;--- 遇到的问题 ora-01045&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;---ORA-01045: user ... lacks CREATE SESSION privilege; logon denied&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;--- This error is thrown if a user wants to log on a database but lacks the create session system privilege.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;---In order to give someone this privilege, use:&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;grant&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;--- See also other Oracle errors.&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;--- 创建表空间&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;TABLESPACE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;DATAFILE&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/data/disk1/aom_space.dbf'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;AUTOEXTEND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;NEXT&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MAXSIZE&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20480&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;EXTENT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MANAGEMENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LOCAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;--- oracle 创建DB需要用用户去创建，也就是先要创建用户 并且指定表空间&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;123456&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom_space&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;---创建用户并指定表空间和临时表空间&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;123456&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom_space&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;TEMPORARY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom_temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;---授权用户&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ANY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VIEW&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ANY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VIEW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EXP_FULL_DATABASE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IMP_FULL_DATABASE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;DBA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CONNECT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RESOURCE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SESSION&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TO&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;---删除表空间&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom_space&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INCLUDING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CONTENTS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DATAFILES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;---查看表空间&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;TABLESPACE_NAME&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TOTALSPACE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;TOTALSPACE/M&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FREESPACE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;FREESPACE/M&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ROUND&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FREESPACE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TOTALSPACE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;USED%&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ROUND&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TOTALSPACE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;DBA_DATA_FILES&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ROUND&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FREESPACE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DBA_FREE_SPACE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;---查看临时表空间&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE_NAME&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DBA_TABLESPACES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;---增加表空间大小&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TABLESPACE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom_space&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DATAFILE&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/data/disk1/aom_space.dbf'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;---增加临时表空间大小&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DATABASE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TEMPFILE&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/data/disk1/aom_temp.dbf'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RESIZE&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8192&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;---删除用户&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CASCADE&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;---把数据导入不同于原系统的表空间，在导入之后却往往发现，数据被导入了原表空间(下面解决此方法)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;grant&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dba&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;---回收用户unlimited tablespace权限，这样就可以导入到用户缺省表空间：&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;revoke&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unlimited&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tablespace&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;quota&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom_space&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;quota&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unlimited&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aom_space&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">oracle 服务采用 Docker 搭建，用的镜像为wnameless/oracle-xe-11g 这里负责整理用来测试时候的问题。</summary></entry><entry><title type="html">serverless demo for kubernetes + ingress [原创]</title><link href="http://firsh.me/2017/12/29/serverlesss-kubeless-ingress-minikube/" rel="alternate" type="text/html" title="serverless demo for kubernetes + ingress [原创]" /><published>2017-12-29T00:11:45+08:00</published><updated>2017-12-29T00:11:45+08:00</updated><id>http://firsh.me/2017/12/29/serverlesss-kubeless-ingress-minikube</id><content type="html" xml:base="http://firsh.me/2017/12/29/serverlesss-kubeless-ingress-minikube/">&lt;h4 id=&quot;文章介绍serverless--kubernetes--ingress--kubeless-快速开发function-简化开发无服务器接口让开发更快-更爽&quot;&gt;文章介绍，Serverless + kubernetes + ingress + kubeless 快速开发function 简化开发，无服务器接口，让开发更快 更爽&lt;/h4&gt;

&lt;h2 id=&quot;工具&quot;&gt;工具&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;kubernetes&lt;/li&gt;
  &lt;li&gt;kubeless&lt;/li&gt;
  &lt;li&gt;ingress&lt;/li&gt;
  &lt;li&gt;serverless&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;启动minikube&quot;&gt;启动Minikube&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;配置Docker 代理下载镜像速度能快一点。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;minikube start --docker-env &lt;span class=&quot;nv&quot;&gt;HTTP_PROXY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.155.2:8118 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                 --docker-env &lt;span class=&quot;nv&quot;&gt;HTTPS_PROXY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://192.168.155.2:8118

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;检查kubernetes 是否已经启动完成。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/d8922ed9-aeb0-4056-9abb-3319cf2b7544.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;检查ingress&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/51342058-f68a-4c0f-ba9b-9ff846c8a571.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;检查UI是否已经启动&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/baee88c2-ccfc-4551-9596-6752c4640826.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;检查kubelessui[有没有都可以]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/4a80959d-8db3-4a44-bc41-403f1c77f324.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;正题&quot;&gt;正题&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;创建一个空的目录一会要用到&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;安装 serverless  &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install serverless&lt;/code&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;安装 serverless-kubeless  &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install serverless-kubeless&lt;/code&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;创建一个serverless function &lt;code class=&quot;highlighter-rouge&quot;&gt;serverless create --template kubeless-python&lt;/code&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;看看serverless 支持多少模版&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/6b52ee20-569a-4450-b3b9-b495c9e3fd0b.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;执行创建命令&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    serverless create --template kubeless-python
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;结果&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;➜  demo2 serverless create --template kubeless-python
    Serverless: Generating boilerplate...
    _______                             __
    |   _   .-----.----.--.--.-----.----|  .-----.-----.-----.
    |   |___|  -__|   _|  |  |  -__|   _|  |  -__|__ --|__ --|
    |____   |_____|__|  &lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;__/|_____|__| |__|_____|_____|_____|
    |   |   |             The Serverless Application Framework
    |       |                           serverless.com, v1.25.0
    -------&lt;span class=&quot;s1&quot;&gt;'

    Serverless: Successfully generated boilerplate for template: &quot;kubeless-python&quot;
    Serverless: NOTE: Please update the &quot;service&quot; property in serverless.yml with your service name
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;目录介绍&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/0d3ccbe2-a619-44ca-bf70-267a2c6a10db.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;里面会出现四个文件 ，第一个git的忽略文件(不用git可能没有)
第二个 是function 的主体
第三个是serverless 部署依赖的yml&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;handler.py&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Go Serverless v1.0! Your function executed successfully!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;input&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;statusCode&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;body&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;serverless.yml&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c1&quot;&gt;# Welcome to Serverless!&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# For full config options, check the kubeless plugin docs:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#    https://github.com/serverless/serverless-kubeless&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# For documentation on kubeless itself:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#    http://kubeless.io&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# Update the service name below with your own service name&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hello-world&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# Please ensure the serverless-kubeless provider plugin is installed globally.&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# $ npm install -g serverless-kubeless&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ...before installing project dependencies to register this provider.&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# $ npm install&lt;/span&gt;

    &lt;span class=&quot;s&quot;&gt;provider&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;kubeless&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;python2.7&lt;/span&gt;

    &lt;span class=&quot;s&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;serverless-kubeless&lt;/span&gt;

    &lt;span class=&quot;s&quot;&gt;functions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;demo2&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# 有重名 hello 所以改成demo2&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;handler.hello&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;package.json [可以不用管]&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;以上的Serverless 可以运行了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;开始部署&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;提示 &lt;code class=&quot;highlighter-rouge&quot;&gt;serverless&lt;/code&gt; 可以简写  &lt;code class=&quot;highlighter-rouge&quot;&gt;sls&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    ➜  demo2 serverless deploy
    Serverless: Packaging service...
    Serverless: Excluding development dependencies...
    Serverless: Deploying &lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;demo2...
    Serverless: Function demo2 successfully deployed

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;查看是否部署成功&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/c1313fae-c4dc-4b9f-bcb8-1508b8dec8fe.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;创建&lt;code class=&quot;highlighter-rouge&quot;&gt;Ingress&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubeless ingress create ingress-demo2  -n default --function demo2
&lt;span class=&quot;c&quot;&gt;# 参数介绍&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ingress-demo 是ingress 的名字&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -n 是kubernetes 的命名空间&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# --function 是你要绑定到那个 function&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;执行命令 没有错误即可，检查 ingress 是否创建&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    kubeless ingress list
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/e2839acc-e728-4f81-99e1-97474ec53a40.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;找到我们的链接&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    demo2.192.168.64.2.nip.io
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;用postman进行测试。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/6e04c70c-ad58-46a5-afc7-498b741323f6.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;测试通过&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ingress 安装一定要检查好&lt;/li&gt;
  &lt;li&gt;serverless-kubeless 每次创建一个 fucntion 都需要在当前目录执行安装命令&lt;code class=&quot;highlighter-rouge&quot;&gt;npm install serverless-kubeless&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;目前kubeless 支持的语言比较少(runtime) python nodejs&lt;/li&gt;
  &lt;li&gt;有兴趣可以看看 &lt;code class=&quot;highlighter-rouge&quot;&gt;aws lambda&lt;/code&gt; 还有 &lt;code class=&quot;highlighter-rouge&quot;&gt;fnproject&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;教程整理比较匆忙如果有疑问请留言。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">文章介绍，Serverless + kubernetes + ingress + kubeless 快速开发function 简化开发，无服务器接口，让开发更快 更爽</summary></entry><entry><title type="html">shell bash 模版填充ENV</title><link href="http://firsh.me/2017/12/28/shell-bash-rep/" rel="alternate" type="text/html" title="shell bash 模版填充ENV" /><published>2017-12-28T21:46:47+08:00</published><updated>2017-12-28T21:46:47+08:00</updated><id>http://firsh.me/2017/12/28/shell-bash-rep</id><content type="html" xml:base="http://firsh.me/2017/12/28/shell-bash-rep/">&lt;h1 id=&quot;quick--start&quot;&gt;quick  start&lt;/h1&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ZK_IP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;192.168.1.1&quot;&lt;/span&gt;
cat &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;template_path&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; |
awk &lt;span class=&quot;s1&quot;&gt;'$0 !~ /^\s*#.*$/'&lt;/span&gt; |
sed &lt;span class=&quot;s1&quot;&gt;'s/[ &quot;]/\\&amp;amp;/g'&lt;/span&gt; |
&lt;span class=&quot;k&quot;&gt;while &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt; -r line;do
    &lt;span class=&quot;nb&quot;&gt;eval echo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt; &amp;gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dst_path&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">quick start</summary></entry><entry><title type="html">LVM 管理之一：扩容VG/LV</title><link href="http://firsh.me/2017/12/27/lvm-vgs-lvs-kuorong/" rel="alternate" type="text/html" title="LVM 管理之一：扩容VG/LV" /><published>2017-12-27T19:40:23+08:00</published><updated>2017-12-27T19:40:23+08:00</updated><id>http://firsh.me/2017/12/27/lvm-vgs-lvs-kuorong</id><content type="html" xml:base="http://firsh.me/2017/12/27/lvm-vgs-lvs-kuorong/">&lt;p&gt;#动态扩容 VG&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;1.1 查看硬盘信息&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# fdisk -l

Disk /dev/hda: 19.3 GB, 19327352832 bytes
255 heads, 63 sectors/track, 2349 cylinders
Units &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; cylinders of 16065 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; 512 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/hda1   &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;           1          13      104391   83  Linux
/dev/hda2              14         144     1052257+  82  Linux swap / Solaris
/dev/hda3             145        2349    17711662+  83  Linux

Disk /dev/hdb: 2147 MB, 2147483648 bytes
16 heads, 63 sectors/track, 4161 cylinders
Units &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; cylinders of 1008 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; 512 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 516096 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/hdb1               1        1985     1000408+  83  Linux
/dev/hdb2            1986        4161     1096704   83  Linux

Disk /dev/hdd: 1073 MB, 1073741824 bytes
16 heads, 63 sectors/track, 2080 cylinders
Units &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; cylinders of 1008 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; 512 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 516096 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/hdd1               1        2080     1048288+  83  Linux


&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# pvscan
  PV /dev/hdb1   VG vg01_pgdata   lvm2 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;976.00 MB / 972.00 MB free]
  PV /dev/hdd1   VG vg01_pgdata   lvm2 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1020.00 MB / 0    free]
  Total: 2 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1.95 GB] / &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;use: 2 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1.95 GB] / &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;no VG: 0 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;0   &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;  
  
  &lt;span class=&quot;c&quot;&gt;#备注：根据 fdisk 和 pvscan 命令输出，知道 /dev/hdb2 还没有加入 VG， 可以使用，接下来将 /dev/hdb2 加入  VG vg01_pgdata。&lt;/span&gt;
  
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;1.2 查看 VG 信息&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# vgdisplay
  --- Volume group ---
  VG Name               vg01_pgdata
  System ID             
  Format                lvm2
  Metadata Areas        2
  Metadata Sequence No  2
  VG Access             &lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt;/write
  VG Status             resizable
  MAX LV                0
  Cur LV                1
  Open LV               1
  Max PV                0
  Cur PV                2
  Act PV                2
  VG Size               1.95 GB
  PE Size               4.00 MB
  Total PE              499
  Alloc PE / Size       256 / 1.00 GB
  Free  PE / Size       243 / 972.00 MB
  VG UUID               B5pg8R-2AGm-6DEp-K7HK-TI1I-HC3h-gWx32m

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;1.3 格式化文件系统&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# mkfs -t ext3 -c /dev/hdb2
mke2fs 1.39 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;29-May-2006&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Filesystem &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
OS &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: Linux
Block &lt;span class=&quot;nv&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4096 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Fragment &lt;span class=&quot;nv&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4096 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
137088 inodes, 274176 blocks
13708 blocks &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;5.00%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; reserved &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the super user
First data &lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0
Maximum filesystem &lt;span class=&quot;nv&quot;&gt;blocks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;281018368
9 block groups
32768 blocks per group, 32768 fragments per group
15232 inodes per group
Superblock backups stored on blocks: 
        32768, 98304, 163840, 229376

Checking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;bad blocks &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt;-only &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;k&quot;&gt;done                                
&lt;/span&gt;Writing inode tables: &lt;span class=&quot;k&quot;&gt;done                            
&lt;/span&gt;Creating journal &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;8192 blocks&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;k&quot;&gt;done
&lt;/span&gt;Writing superblocks and filesystem accounting information: &lt;span class=&quot;k&quot;&gt;done

&lt;/span&gt;This filesystem will be automatically checked every 28 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;1.4 创建PV&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# pvcreate /dev/hdb2
  Physical volume &lt;span class=&quot;s2&quot;&gt;&quot;/dev/hdb2&quot;&lt;/span&gt; successfully created  
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;1.5 在线扩容 VG&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# vgs
  VG          &lt;span class=&quot;c&quot;&gt;#PV #LV #SN Attr   VSize VFree  &lt;/span&gt;
  vg01_pgdata   2   1   0 wz--n- 1.95G 972.00M

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# vgextend vg01_pgdata /dev/hdb2
  Volume group &lt;span class=&quot;s2&quot;&gt;&quot;vg01_pgdata&quot;&lt;/span&gt; successfully extended
  
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# vgs
  VG          &lt;span class=&quot;c&quot;&gt;#PV #LV #SN Attr   VSize VFree&lt;/span&gt;
  vg01_pgdata   3   1   0 wz--n- 2.99G 1.99G

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;1.6 再次查看 VG，查看是否扩容&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# vgdisplay
  --- Volume group ---
  VG Name               vg01_pgdata
  System ID             
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  3
  VG Access             &lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt;/write
  VG Status             resizable
  MAX LV                0
  Cur LV                1
  Open LV               1
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               2.99 GB
  PE Size               4.00 MB
  Total PE              766
  Alloc PE / Size       256 / 1.00 GB
  Free  PE / Size       510 / 1.99 GB
  VG UUID               B5pg8R-2AGm-6DEp-K7HK-TI1I-HC3h-gWx32m    
  
  &lt;span class=&quot;c&quot;&gt;#  备注：现在 vg01_pgdata 大小为 3 GB 左右，已成功扩容 1 GB。&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;动态扩容-lv&quot;&gt;动态扩容 LV&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  * 目标给已在线上使用的LV 扩容，在以下例子中，给目录 /database/pgdata1 扩容 512 M。
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;2.1 查看目录使用情况&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# df -hv
Filesystem            Size  Used Avail Use% Mounted on
/dev/hda3              17G  9.8G  5.8G  64% /
/dev/hda1              99M   18M   76M  20% /boot
tmpfs                 217M     0  217M   0% /dev/shm
none                  217M  104K  217M   1% /var/lib/xenstored
/dev/mapper/vg01_pgdata-lv_pgdata1
                     1008M   34M  924M   4% /database/pgdata1  
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;2.2 查看所属 VG 信息&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# vgdisplay
  --- Volume group ---
  VG Name               vg01_pgdata
  System ID             
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  3
  VG Access             &lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt;/write
  VG Status             resizable
  MAX LV                0
  Cur LV                1
  Open LV               1
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               2.99 GB
  PE Size               4.00 MB
  Total PE              766
  Alloc PE / Size       256 / 1.00 GB
  Free  PE / Size       510 / 1.99 GB
  VG UUID               B5pg8R-2AGm-6DEp-K7HK-TI1I-HC3h-gWx32m
  
&lt;span class=&quot;c&quot;&gt;#备注：从上面看出，VG vg01_pgdata 最大可用空间为 2.99 GB, 目前已分配 1 GB，还剩余 1.99 GB 可以分配。&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;2.3 增加 LV 大小&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]#  lvextend  -L +512M /dev/mapper/vg01_pgdata-lv_pgdata1 
  Extending logical volume lv_pgdata1 to 1.50 GB
  Logical volume lv_pgdata1 successfully resized
 

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# df -hv
Filesystem            Size  Used Avail Use% Mounted on
/dev/hda3              17G  9.9G  5.8G  64% /
/dev/hda1              99M   18M   76M  20% /boot
tmpfs                 217M     0  217M   0% /dev/shm
none                  217M  104K  217M   1% /var/lib/xenstored
/dev/mapper/vg01_pgdata-lv_pgdata1
                     1008M   34M  924M   4% /database/pgdata1
                     
  &lt;span class=&quot;c&quot;&gt;#备注： LV 扩容成功，但目录 /database/pgdata1 大小仍然为 1G，没有变化。还需要 resize2fs 命令处理下。&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;2.4 resize2fs&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# resize2fs -f /dev/mapper/vg01_pgdata-lv_pgdata1
resize2fs 1.39 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;29-May-2006&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Filesystem at /dev/mapper/vg01_pgdata-lv_pgdata1 is mounted on /database/pgdata1; on-line resizing required
Performing an on-line resize of /dev/mapper/vg01_pgdata-lv_pgdata1 to 524288 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;4k&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; blocks.
The filesystem on /dev/mapper/vg01_pgdata-lv_pgdata1 is now 524288 blocks long.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;2.5 再次查看&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@pgb lvm]# df -hv
Filesystem            Size  Used Avail Use% Mounted on
/dev/hda3              17G  9.8G  5.8G  64% /
/dev/hda1              99M   18M   76M  20% /boot
tmpfs                 217M     0  217M   0% /dev/shm
none                  217M  104K  217M   1% /var/lib/xenstored
/dev/mapper/vg01_pgdata-lv_pgdata1
                      1.5G   34M  1.4G   3% /database/pgdata1      
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;备注：目录  /database/pgdata1  空间果然变大了。&lt;/p&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">#动态扩容 VG</summary></entry><entry><title type="html">Aws Serverless for lambda Test</title><link href="http://firsh.me/2017/12/27/serverless-aws-in/" rel="alternate" type="text/html" title="Aws Serverless for lambda Test" /><published>2017-12-27T14:20:17+08:00</published><updated>2017-12-27T14:20:17+08:00</updated><id>http://firsh.me/2017/12/27/serverless-aws-in</id><content type="html" xml:base="http://firsh.me/2017/12/27/serverless-aws-in/">&lt;h1 id=&quot;aws-lambda-to-serverless&quot;&gt;Aws Lambda to Serverless&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/a43efa7f-f810-4164-970f-8bd1f309650c.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;aws-lambda-function-编辑器&quot;&gt;aws lambda function 编辑器&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/8d472d40-ff9c-4108-91be-1364307b5599.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;编辑器的console-以及-测试按钮语言版本&quot;&gt;编辑器的console 以及 测试按钮，语言版本&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/111c3da3-cb1e-48de-b3b7-c286d9fc55e2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;常用的配置项&quot;&gt;常用的配置项&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/89ba65d2-c46a-434e-bb96-afa15d02c6f5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/bfa64818-bf58-45fa-8e2a-51405c187f7e.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;配置aws-iam执行策略&quot;&gt;配置AWS IAM执行策略&lt;/h2&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;Sid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;VisualEditor0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;s3:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iam:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;apigateway:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:ListStacks&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;logs:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:ValidateTemplate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:DescribeStackEvents&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:CreateStack&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;lambda:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:UpdateStack&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:DescribeStackResource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:CreateChangeSet&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:DescribeChangeSet&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:ExecuteChangeSet&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudformation:DescribeStacks&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;demo&quot;&gt;demo&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/070f4afd-25c7-4783-a9e3-e77f133daad8.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">Aws Lambda to Serverless</summary></entry><entry><title type="html">kubeless原创实验</title><link href="http://firsh.me/2017/12/26/kubeless-simple/" rel="alternate" type="text/html" title="kubeless原创实验" /><published>2017-12-26T01:13:11+08:00</published><updated>2017-12-26T01:13:11+08:00</updated><id>http://firsh.me/2017/12/26/kubeless-simple</id><content type="html" xml:base="http://firsh.me/2017/12/26/kubeless-simple/">&lt;h1 id=&quot;quick-start&quot;&gt;quick start&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;实验环境kubernetes 1.8&lt;/li&gt;
  &lt;li&gt;kubeless 3&lt;/li&gt;
  &lt;li&gt;docker 17-ce&lt;/li&gt;
  &lt;li&gt;kubeless-ui latest&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;部署function&quot;&gt;部署function&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
 kubeless &lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;deploy get-python  --runtime python2.7 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                --from-file hellowithdata.py&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                --handler hellowithdata.handler &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                --trigger-http

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;部署成功&quot;&gt;部署成功&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;➜  python git:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ✗ kubeless &lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;ls
NAME      	NAMESPACE	HANDLER              	RUNTIME  	TYPE	TOPIC	DEPENDENCIES	STATUS
&lt;span class=&quot;k&quot;&gt;function  	&lt;/span&gt;default  	hello.handler        	python2.7	    	     	            	1/1 READY
get-python	default  	hellowithdata.handler	python2.7	HTTP	     	            	1/1 READY

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;ui查看&quot;&gt;UI查看&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/33632748-61ce-41ac-9ede-f9b9a0b2fc7f.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;用命令测试&quot;&gt;用命令测试&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/ff6ab7bd-2891-428d-b7f3-4975b07ae896.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;curl请求&quot;&gt;curl请求&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 将kubectl 代理到本地端口&lt;/span&gt;
kubectl proxy -p 8080 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;测试&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
➜  python git:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ✗ curl -L --data &lt;span class=&quot;s1&quot;&gt;'{&quot;Another&quot;: &quot;Echo&quot;}'&lt;/span&gt; localhost:8080/api/v1/proxy/namespaces/default/services/get-python:function-port/ --header &lt;span class=&quot;s2&quot;&gt;&quot;Content-Type:application/json&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Another&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;Echo&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;%

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;解答&quot;&gt;解答&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    --from-file &lt;span class=&quot;c&quot;&gt;# 可执行文件 .py&lt;/span&gt;
    --runtime &lt;span class=&quot;c&quot;&gt;#执行环境&lt;/span&gt;
    --handler &lt;span class=&quot;c&quot;&gt;# function 执行某个方法&lt;/span&gt;
    --trigger-http  &lt;span class=&quot;c&quot;&gt;# function 模式&lt;/span&gt;
    --runtime-image &lt;span class=&quot;c&quot;&gt;# 默认不需要（如果在离线状态可以指定本地已经存在的镜像）&lt;/span&gt;
    --trigger-topic &lt;span class=&quot;c&quot;&gt;# 个人理解是参数存放的topic 比如流处理 （存放到指定队列）&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">quick start</summary></entry><entry><title type="html">Serverless for Java development</title><link href="http://firsh.me/2017/12/25/2017-12-25-serverless-1/" rel="alternate" type="text/html" title="Serverless for Java development" /><published>2017-12-25T14:13:23+08:00</published><updated>2017-12-25T14:13:23+08:00</updated><id>http://firsh.me/2017/12/25/2017-12-25-serverless-1</id><content type="html" xml:base="http://firsh.me/2017/12/25/2017-12-25-serverless-1/">&lt;p&gt;Server Less 我的第一个简单的实例。&lt;/p&gt;

&lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;

&lt;p&gt;Serverless 适用场景：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;1 运算密集 —— 如图片压缩、数据分析。因为使用 Serverless 方案同一秒里可以运行千上万个 Lambda，能轻易实现传统架构无法实现的超强处理能力，并且只在使用时收费。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;2  为其它服务提供编程支持 —— 例如，当 AWS DynamoDB 数据发生变化时，调用 AWS Lambda 生成 PDF 报表。再如，为 AWS API Gateway 提供自定义权限验证脚本。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;3  定时任务 —— 以往使用 cron 编写的定时任务可以改用 AWS Lambda 实现，很明显的好处是任务不执行的时候完全不收费。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;4  瘦容器 —— 因为 AWS Lambda 本身基于 Docker 容器实现，Lambda 方法跑在 Amazon Linux AMI 中，虽然官方支持的编程语言只有 NodeJS、Java、Python，但其实可以用 NodeJS 的 shim 运行大部分能在 Linux 下运行的程序。以至于有人用这个特性做了 LambCI 这种脑洞大开的 Serverless CI 服务。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;5   无人运维 —— Serverless 的核心优势就是不需要管理服务器，自伸缩的特性如果用传统方案解决会相对复杂很多。如果你需要一个服务为你跑好几年，期间完全不需要担心它的服务器运行情况，Serverless 会是最好的选择。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;quick-start-fnproject&quot;&gt;quick start [fnproject]&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Docker ，fn cli ，nodejs&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;用到以下两个工具
   https://github.com/fnproject/fn &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;https://github.com/fnproject/ui&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;brew install fn # 安装fn command命令行&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;执行fn start 启动 FN_Server
   &lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/574abd7a-5de7-4de3-ba11-84517eb23074.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;请求
   &lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/9b1eb8af-ccb5-415e-bc77-89e72c2dc05d.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;请求实例
   &lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/b8491fa5-4bd1-48ff-ac51-2151a096406a.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;coder&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/25648265-1603-4516-bab5-21e95b3c47d2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;yaml 配置&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/54eae79d-7c0b-422c-966f-3701f1dc40f2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;deploy hello&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/f4c7ebb2-3674-49b5-9848-9f16d4390a73.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;kubeless-整理中&quot;&gt;kubeless [整理中]&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;kubeless function1.yaml&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
  &lt;span class=&quot;s&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;k8s.io/v1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Function&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;function1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hello.foobar&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;registry.timeondata.com/firsh_demo/kubeless_runtime_python:2.7.1&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;python2.7&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;deps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;cowpy&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;import time&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;import random&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;from cowpy import cow&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;def foobar():&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;# NB: delay will be negative and sleep will raise an error&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;# occasionally.  This is a feature for demoing errors.&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;delay = random.normalvariate(0.3, 0.2)&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;time.sleep(delay)&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;msg = &quot;hello world - with a %0.2fs artificial delay&quot; % delay&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;c = cow.get_cow()&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;return c().milk(msg)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;启动&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  ➜ python git:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ✗ kubectl create -f function1.yaml

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;检查启动&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;c&quot;&gt;# 检查启动&lt;/span&gt;
 ➜  python git:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ✗ kubeless &lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;ls
NAME     	NAMESPACE	HANDLER     	RUNTIME  	TYPE	TOPIC	DEPENDENCIES	STATUS
function1	default  	hello.foobar	python2.7	    	     	cowpy       	1/1 READY
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;测试调用&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    kubeless &lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;call  function1 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;结果&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
➜  python git:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ✗ kubeless &lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;call  function1
 _____________________________________________
&amp;lt; hello world - with a 0.42s artificial delay &amp;gt;
 ---------------------------------------------
     &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;  ^__^
      &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;oo&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;______
         &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;__&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\/\&lt;/span&gt;
           &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;----w |
           &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>breakeval13</name></author><summary type="html">Server Less 我的第一个简单的实例。</summary></entry></feed>